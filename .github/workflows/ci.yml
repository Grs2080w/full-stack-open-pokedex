name: CI

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

jobs:
  pipeline:
    uses: ./.github/workflows/pipeline.yml
  playwright:
    uses: ./.github/workflows/playwright.yml
  #ci:
  #  # Tests
  #  timeout-minutes: 60
  #  runs-on: ubuntu-latest
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: actions/setup-node@v4
  #      with:
  #        node-version: lts/*
  #    - name: Install dependencies
  #      run: npm ci
  deploy:
    # Only run this step if the branch is main
    if: github.ref == 'refs/heads/main'
    env:
      deploy_url: ${{ secrets.RENDER_DEPLOY_HOOK }}
    run: |
      curl "$deploy_url"
        
